# Диаграмма последовательности
# Прецендент для пользователя, админа и госслужащего
## Вход в систему
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Вход_в_систему.png)
### Описание

Процесс описывает вход пользователя в систему. Пользователь передает логин и пароль в AuthController, который затем проверяет наличие пользователя в базе данных. Если пользователь найден, происходит проверка пароля. Если пароль правильный, пользователю генерируется токен для доступа, и он получает сообщение о успешном входе.

# Прецендент для пользователя
## Создание учетной записи
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Создание_учетной_записи_пользователь.png)
### Описание

Процесс описывает регистрацию нового пользователя. Пользователь отправляет запрос на создание учетной записи через AuthController. Затем, данные проходят валидацию через AuthService. Если данные корректны, происходит проверка наличия пользователя в базе. Если пользователь не найден, он сохраняется в базе данных. В случае успешного создания учетной записи, пользователь получает сообщение об успешной регистрации.

## Подача заявки
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Подача_заявки.png)
### Описание

Этот процесс описывает подачу заявки пользователем. Сначала пользователь отправляет заявку через ApplicationController. В системе происходит запрос на получение правил для услуги, с которой связана заявка, и характеристик пользователя. После того как все данные получены, происходит валидация правил. Если все правила соблюдены, заявка сохраняется в базе данных, и пользователь получает сообщение об успешной подаче заявки.

## Просмотр заявок пользователя
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Просмотр_заявок_пользователя.png)
### Описание

Пользователь может просматривать свои заявки. Он отправляет запрос на получение заявок, после чего система проверяет наличие заявок в базе данных и возвращает их в ответ. Пользователь получает список своих заявок с их статусами.

## Изменение параметров учетной записи
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Именение_параметров.png)
### Описание

Пользователь может обновить свою информацию в учетной записи. Для этого система сначала проверяет, существует ли пользователь в базе данных. Если пользователь найден, данные обновляются в базе, и пользователь получает сообщение об успешном обновлении. Если пользователь не найден, возвращается ошибка.

## Отмена заявки
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Отмена_заявки.png)
### Описание

Пользователь может отменить заявку. Для этого система проверяет статус заявки, и если она находится в состоянии "Ожидает рассмотрения", она может быть отменена. В противном случае возвращается ошибка, и заявка не отменяется. После успешной отмены пользователь получает подтверждение.

# Прецендент для госслужащего

## Изменение статуса заявки
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Изменение_статуса_заяки.png)
### Описание

Госслужащий может изменить статус заявки. Для этого происходит запрос заявки из базы данных, затем проверяется, можно ли изменить статус. Если статус корректен, заявка обновляется в базе, и госслужащий получает подтверждение изменения статуса. Если статус некорректен, выводится ошибка.

# Прецендент для админа

## Добавление новой услуги
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Добавление_новой_услуги.png)
### Описание

Администратор добавляет новую услугу в систему. Сначала происходит добавление услуги в базу, затем добавляются правила, связанные с этой услугой. После успешного добавления услуг и правил, администратор получает подтверждение о завершении операции.

## Редактирование услуги
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Редактирование_услуги.png)
### Описание

Администратор может заменить существующую услугу на новую. Сначала происходит проверка наличия старой услуги, затем она деактивируется. Далее добавляется новая услуга, и система подтверждает успешное обновление услуги.

## Деактивация услуги
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Деактивация_услуги.png)
### Описание

Администратор может деактивировать услугу в системе. Для этого происходит запрос услуги из базы данных, и если она найдена, ее статус обновляется, и дата деактивации записывается в базу данных. После успешной деактивации администратор получает подтверждение операции.

## Регистрация администратора/госслужащего
![](https://github.com/Marina200426/PIS-Belonogov-Chelokhsaeva/blob/main/Диаграмма%20последовательности/Регистрация_админом.png)
### Описание

Этот процесс описывает регистрацию нового администратора/госслужащего. Сначала проверяются данные и роль, после чего происходит проверка на существование пользователя с таким же email. Если такого пользователя нет, его данные сохраняются в базе данных, и учетная запись успешно создается.